POSICION_LIB MACRO R,COL
	PUSH BX
	PUSH DX
	PUSH AX
	
	MOV BH,0 ;INDICO LA PANTALLA
	MOV DH,R ; INDICO EL RENGLON (0-24)
	MOV DL,COL; INDICO LA COLUMNA(0-79)
	MOV AH, 2H; INTERRUPCION
	INT 10H
	POP AX
	POP DX
	POP BX
ENDM

CR EQU 13
LF EQU 10
LIN EQU 80
	E_SUPERIOR_IZQUIERDA 	EQU 0C9H
	E_SUPERIOR_DERECHA 		EQU 0BBH
	E_INFERIOR_IZQUIERDA	EQU 0C8H
	E_INFERIOR_DERECHA 		EQU 0BCH
	BARRA_HORIZONTAL 		EQU 0CDH
	BARRA_HORIZONTAL_NG		EQU 0DCH
	BARRA_CHICA				EQU 0C4H
	BARRA_VERTICAL	 		EQU 0BAH
	BARRA_VERTICAL_CHI	 	EQU 0B3H
	BARRA_FORMA_T 	 		EQU 0CBH


.MODEL SMALL
.DATA
	;VARIABLES
	CONT DB 80

	UNIDAD DW 0
	DECENA DW 0
	CENTENA DW 0
	MILESIMA DW 0
	RESULTADO DW 0
	CONV DB 10 
.CODE

	PUBLIC IMPRIME_HEXADECIMAL
IMPRIME_HEXADECIMAL PROC
	PUSH	CX
	PUSH	DX
	MOV		DH,DL
	MOV		CX,4
	SHR 	DL,CL
	CALL 	IMPRIME_DIGITO_HEXADECIMAL
	MOV		DL,DH
	AND		DL,0FH
	CALL	IMPRIME_DIGITO_HEXADECIMAL
	POP		DX
	POP		CX
	RET
IMPRIME_HEXADECIMAL ENDP

	PUBLIC IMPRIME_DIGITO_HEXADECIMAL
IMPRIME_DIGITO_HEXADECIMAL		PROC
	PUSH	DX
	CMP		DL,10
	JAE		LETRA_HEXADECIMAL
	ADD		DL,"0"
	JMP		IMPRIME_DIGITO
LETRA_HEXADECIMAL:
	ADD		DL,"A"-10
IMPRIME_DIGITO:
	CALL	IMPRIME_CARACTER
	POP 	DX
	RET
IMPRIME_DIGITO_HEXADECIMAL ENDP

	PUBLIC IMPRIME_CARACTER
IMPRIME_CARACTER		PROC
	PUSH	AX
	MOV		AH,2
	INT		21H
	POP		AX
	RET
IMPRIME_CARACTER		ENDP

	PUBLIC SALTO_DE_LINEA
SALTO_DE_LINEA PROC
	PUSH AX
	PUSH DX
	MOV		AH,02
	MOV		DL,CR
	INT		21H
	MOV		DL,LF
	INT		21H
	POP DX
	POP AX
	RET
SALTO_DE_LINEA ENDP

	PUBLIC LINEAS_PRINCIPALES 
LINEAS_PRINCIPALES PROC
		MOV CX,LIN
	CICLO:
		MOV DL, BARRA_HORIZONTAL_NG
		CALL IMPRIME_CARACTER
	LOOP CICLO

		MOV CX,LIN
	CICLO2:
		MOV DL, BARRA_CHICA
		CALL IMPRIME_CARACTER
	LOOP CICLO2
		RET
LINEAS_PRINCIPALES ENDP
	PUBLIC LINEA_DELGADA
LINEA_DELGADA PROC
	POSICION_LIB 08H,01H
	MOV CX, 78
	LINEA:
		MOV DL, BARRA_CHICA
		CALL IMPRIME_CARACTER
	LOOP LINEA
	RET
LINEA_DELGADA ENDP
	
	PUBLIC IMPRIME_MENSAJE
IMPRIME_MENSAJE PROC
	MOV AH,09H
	INT 21H
	RET
IMPRIME_MENSAJE ENDP

	PUBLIC LINEA_HORIZONTAL
LINEA_HORIZONTAL PROC
	PUSH CX
	PUSH DX
	MOV CL, CONT
	CICLO_HORIZONTAL:
		MOV DL, BARRA_HORIZONTAL
		CALL IMPRIME_CARACTER
		LOOP CICLO_HORIZONTAL

	POP DX
	POP CX
	RET
LINEA_HORIZONTAL ENDP

	PUBLIC LINEA_VERTICAL
LINEA_VERTICAL PROC
	MOV DL, BARRA_VERTICAL
	CALL IMPRIME_CARACTER
	RET
LINEA_VERTICAL ENDP 
	
	PUBLIC LEE_CARACTER_DECIMAL
LEE_CARACTER_DECIMAL PROC
	MOV AH,01H
	INT 21H
	SUB AL,30H
	RET
LEE_CARACTER_DECIMAL ENDP

	PUBLIC LEE_4_DECIMALES
LEE_4_DECIMALES PROC
CALL LEE_CARACTER_DECIMAL 
	MOV AH, 00
	MOV BX, 1000
	MUL BX
	MOV MILESIMA, AX

	CALL LEE_CARACTER_DECIMAL
	MOV AH,00
	MOV BX, 100
	MUL BX
	MOV CENTENA,AX

	CALL LEE_CARACTER_DECIMAL
	MOV AH,00
	MOV BX, 10
	MUL BX
	MOV DECENA, AX

	CALL LEE_CARACTER_DECIMAL
	MOV AH, 00
	MOV UNIDAD, AX

	MOV AX, MILESIMA
	ADD AX, CENTENA
	ADD AX, DECENA
	ADD AX, UNIDAD
	MOV RESULTADO,AX

	MOV DX, RESULTADO
	RET
LEE_4_DECIMALES ENDP

LINEA_HORIZONTAL2 PROC
	MOV CONT, 75
	POSICION_LIB 11, 02
	CALL LINEA_HORIZONTAL
	POSICION_LIB 15, 02
	CALL LINEA_HORIZONTAL
	MOV CONT,12
	CALL LINEA_VERTICAL4

	RET
LINEA_HORIZONTAL2 ENDP

LINEA_VERTICAL4 PROC
	;MOV CONT, 16
	MOV CX, 03H
	CICLO_VERTICAL:
		POSICION_LIB CONT, 14
		CALL IMP_BARRA_CHICA
		POSICION_LIB CONT, 33
		CALL IMP_BARRA_CHICA
		POSICION_LIB CONT, 50
		CALL IMP_BARRA_CHICA
		POSICION_LIB CONT,77
		CALL IMP_BARRA_CHICA 
		ADD CONT, 01H
	LOOP CICLO_VERTICAL
	RET
LINEA_VERTICAL4 ENDP

IMP_BARRA_CHICA PROC
	PUSH DX 
	MOV DL, BARRA_VERTICAL_CHI
	CALL IMPRIME_CARACTER
	POP DX 
	RET
IMP_BARRA_CHICA ENDP

	PUBLIC IMPRIME_DECIMAL
IMPRIME_DECIMAL 	PROC
	PUSH	AX
	PUSH	CX
	PUSH	DX
	MOV		AX,DX
	XOR		CX,CX
NO_CERO:
	XOR		DX,DX
	DIV		SI
	PUSH	DX
	INC		CX
	OR		AX,AX
	JNE	NO_CERO
IMPRIME_CICLO:
	POP		DX
	CALL	IMPRIME_DIGITO_HEXADECIMAL
	LOOP	IMPRIME_CICLO
FIN_DECIMAL:
	POP		DX
	POP		CX
	POP		AX
	RET
IMPRIME_DECIMAL 	ENDP

END